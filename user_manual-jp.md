# PromptCrafter 取り扱い説明書


## アプリケーションの概要

PromptCrafter は、Stable Diffusion の画像生成に役立つプロンプトを生成するためのデスクトップアプリケーションです。このアプリは、AI モデルまたはテンプレートを使用して高品質なプロンプトを生成し、効率的な画像生成を支援します。


## アプリケーションの起動

1. リポジトリをクローンまたはダウンロードし、PromptCrafter フォルダに移動します。
2. 必要なライブラリをインストールするために、コマンドラインまたはターミナルで以下のコマンドを実行します。

```bash
pip install -r requirements.txt
```

3. 次のコマンドを実行してアプリケーションを起動します。

```bash
python main.py
```


## メイン画面の操作

1. **キーワード入力:**
   * 画面上部の「Enter Keywords:」と書かれたテキストボックスに、プロンプト生成に使用するキーワードを入力します。複数入力する場合は、カンマ区切りで入力してください。
2. **プロンプト表示:**
   * 「Positive Prompt:」と「Negative Prompt:」と書かれた下のテキストボックスに、生成されたプロンプトが表示されます。
3. **LoRA選択:**
   * 「Select LoRA:」と表示されたドロップダウンメニューから、使用するLoRAモデルを選択します。選択しない場合は、「None」のままにしておきます。
4. **カテゴリ選択:**
   * 画面左下にあるカテゴリボタン(例:"Nature", "People", "Prompts", "NSFW"など)をクリックすると、対応する中項目がポップアップ表示されます。
   * 中項目を選択すると、対応する小項目が表示され、チェックボックスをクリックすることで、キーワード入力欄にキーワードが追加されます。
5. **プロンプト検索:**
   * 「Search Prompts:」と書かれたテキストボックスにキーワードを入力し、「Search」ボタンをクリックします。
   * 検索結果がポップアップウィンドウに表示され、チェックボックスを選択して「Add Selected Prompts」ボタンをクリックすることで、キーワード入力欄にプロンプトが追加されます。
6. **プロンプト生成:**
   * 「Generate Prompt」ボタンをクリックすると、入力されたキーワードや設定に基づいてプロンプトが生成され、プロンプト表示欄に表示されます。
7.  **プロンプトのコピー:**
   * 「Copy Positive Prompt」ボタンをクリックすると、ポジティブプロンプトがクリップボードにコピーされます。
   * 「Copy Negative Prompt」ボタンをクリックすると、ネガティブプロンプトがクリップボードにコピーされます。


## 設定画面の操作

1.  **設定画面の起動:**
   * メイン画面の「Settings」ボタンをクリックすると、設定画面が開きます。
2.  **プロンプトテンプレートの編集:**
   * 「Positive Template:」と「Negative Template:」と書かれたテキストボックスに、プロンプト生成に使用するテンプレートを編集します。`{keyword}` を使用すると、キーワード入力欄に入力した内容が反映されます。
3.  **モデルの選択:**
   * 「Model Name:」と書かれたテキストボックスに、Hugging Face Hub からダウンロード可能なテキスト生成モデルの名前を入力します。
4.  **AI生成の有効化:**
   * 「Use Model for Generation:」のチェックボックスをオンにすると、AIモデルによるプロンプト生成が有効になります。オフにすると、テンプレートベースでプロンプトが生成されます。
5.  **AI生成モードの設定:**
   *  AI生成モードを、「positive_only(ポジティブプロンプトのみAI生成)」、「negative_only(ネガティブプロンプトのみAI生成)」、「both(両方AI生成)」から選択できます。
6.  **自動生成エリアの指定:**
   * 「Auto Generate Areas:」と書かれたテキストボックスに、AIモデルが自動生成するキーワードのカテゴリをカンマ区切りで入力します (例: `style, subject`)。
7.  **CSVファイルからのプロンプト追加:**
   * 「Add Prompts from CSV」ボタンをクリックして、プロンプトが記載されたCSVファイルを選択します。CSVファイルの内容は、「Prompts」カテゴリに追加され、検索機能で利用できます。
8.  **設定の保存:**
   * 「OK」ボタンをクリックすると、変更した設定が保存されます。


## 設定ファイルの編集

1.  **app_settings.json:**
   *  アプリケーションの設定を保存するファイルです。
   *  GUI上の設定画面で変更した内容が、このファイルに保存されます。
2. **categories.json:**
   *  カテゴリとキーワードを記述したファイルです。
   *  このファイルを編集することで、GUIに表示されるカテゴリやキーワードを変更できます。
3.  **config.py:**
   *  アプリケーションのデフォルト設定を記述するファイルです。
   *  このファイル内の`DEFAULT_APP_SETTINGS`を変更する事で、デフォルト設定を編集できます。

## トラブルシューティング

*   **モデルがロードできない場合:**
    *  `model_name` に指定したモデルが、Hugging Face Hub に存在するかどうかを確認してください。
    *  モデルによっては、初回起動時やモデル変更時にダウンロードに時間がかかることがあります。
*   **プロンプトが生成されない場合:**
    *  キーワード入力欄に、プロンプト生成に使用するキーワードが入力されていることを確認してください。
    *  AIモデルを使用する場合、`model_name` にテキスト生成モデルを指定しているかを確認してください。
    *  AIモデルを使用する場合、`auto_generate_areas` に適切なカテゴリが指定されているか確認してください。
*  **GUIに"Prompts"ボタンが表示されない**
   *  CSVファイルからプロンプトを読み込むと、自動的に表示されるようになります。
   *  または `categories.json`に"Prompts"カテゴリがあるかを確認してください。


## 注意事項
* NSFWカテゴリを使用する際は、利用規約と法律を遵守してください。
* モデルによっては、メモリ不足でエラーになる場合があります。その際は、より軽量なモデルを試してみてください。